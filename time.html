<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="styles/time.css">
</head>
<body>
    <p id="date"></p>
    <h1 id="time"></h1>
    <p id="timezone"></p>

    <script>
        async function fetch_time() {
            const weekdays = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
            const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];

            let response = await fetch("https://worldtimeapi.org/api/timezone/Europe/London");
            let time_obj = await response.json();

            let date = new Date(time_obj.utc_datetime);

            let day = weekdays[date.getUTCDay()];
            let date_num = date.getUTCDate();
            let month = months[date.getUTCMonth()];
            let year = date.getUTCFullYear(); 
            let timezone = time_obj.utc_offset;

            let hours = date.getUTCHours().toString().padStart(2, '0');
            let minutes = date.getUTCMinutes().toString().padStart(2, '0');
            let seconds = date.getUTCSeconds().toString().padStart(2, '0');
            let mseconds = date.getUTCMilliseconds().toString().padStart(2, '0');
            
            document.getElementById("date").innerHTML = `${day} ${date_num} ${month} ${year}`;
            document.getElementById("time").innerHTML = `${hours}:${minutes}:${seconds}.${mseconds}`;
            document.getElementById("timezone").innerHTML = `Timezone ${timezone}`;
        
        }
        setInterval(fetch_time, 1)
        fetch_time();
    </script>  
</body>
</html>